---
import { getCollection } from "astro:content";
import Link from "../../components/Link.astro";
import PostLayout from "../../layouts/PostLayout.astro";

export async function getStaticPaths() {
  const items = await getCollection("projects");
  return items
    .filter((p) => !p.data.draft)
    .map((p) => ({ params: { slug: p.slug }, props: p }));
}

const project = Astro.props as any;
const { Content } = await project.render();
---

<PostLayout
  title={project.data.title}
  description={project.data.title}
  date={project.data.date}
  readingTime={undefined}
  slug={project.slug}
  showMeta={false}
>
  <Content components={{ a: Link }} />
</PostLayout>
